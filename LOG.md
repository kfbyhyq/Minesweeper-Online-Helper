# Minesweeper Online Helper 在线扫雷网（WoM）助手
https://minesweeper.online/

## v1.0
### 基础功能

插件有三个按钮，在对应页面点击按钮提取信息

1. 刷新宝石/场币价格：

   作用页面：商店主页

   功能：提取页面宝石、竞技场币、装备碎片当前最低市场价

   输出：csv文件
   
2. 刷新竞技场门票价格：

   作用页面：竞技场主页

   功能：提取所有竞技场门票（必须是当前账号拥有的）当前最低市场价

   输出：csv文件
   
3. 刷新个人数据：

   作用页面：我的主页（需要中文）(别人的主页也行)

   功能：提取账号现有资源

   输出：csv文件

### v1.1

个人数据新增装备加成值

## v2.0

增加独立主页，结果整合在页面上，废弃csv文件输出

新增活动任务分析功能，预测下一任务

## v3.0

1. 重做主页

   新增标题栏和导航栏
   
   导航栏将功能分为“游戏数据”、“当前市价”、“资源数据”、“完美装备”、“活动竞技场”（4n+1月）、“活动任务”（4n月），以及一个“刷新数据”按钮。

   游戏数据采集statistics页个人数据，每天的数据保存一个条目，相减得出每日增量。

   当前市价新增竞技场门票使用与出售的价值比较。

   资源数据分为四个表显示，竞技场门票数量新增对可能存在的活动竞技场的支持。

2. 活动竞技场页

   记录活动竞技场门票价格，分为最新数据和历史价格
   
   最新数据可自动刷新（需要账号中有对应的竞技场门票）或手动刷新：点击对应最低价对应位置，输入值后回车，或批量输入点击“手动刷新”按钮。

   历史数据类似游戏数据，记录每日数据列在表中。

3. 自动刷新功能

   新增定时器，每天固定时间触发导航栏的“刷新数据”和活动竞技场的“自动刷新价格”按钮。目前必须打开插件主页且浏览器窗口被激活才能成功刷新，有待进一步设计。

- Todo 

   ~~考虑当前市价显示的竞技场门票也支持点击表格手动更新，由于表格较大，可能会比较混乱。~~

   ~~设置页面，包括个人id和自动刷新开关、时间等。~~

### v3.1

- 新增

   每个条目下的“打开页面”按钮

   设置页：账号设置、自动刷新、数据备份与恢复

   自动刷新可选择开关，时间可设置

- 改动

   必须设置id后才能刷新个人数据
   
   收到数据后页面的更新方式

   优化函数、统一语句风格

### v3.2

- 新增

   个人数据页新增奖杯信息

- 改动

   资源数据页改名为个人数据页

   修正竞技场门票价值的计算错误

- Todo

   ~~个人信息页无宝石、场币、装备等条目时的错误保护~~

### v3.3

- 新增

   友谊任务页面

   个人数据页奖杯栏新增奖杯变化历史

   奖杯明细增加级别
   
- 改动

   日期改为UTC，更适合网站更新周期

   竞技场收益比较方式

   一些语句

### v3.4

- 新增

   友谊任务数据统计排序功能

- 改动

   个人信息页条目不全也能正确录入

   小数输出格式

### v3.4.1

- 新增

   友谊任务可以手动修改昨天的活跃度

   友谊任务总统计可以展开和收起

- 改动

   一些bug

   一些ui

   一些保护

### v3.5

- 新增

   保存当前版面为.mine格式功能

   个人数据资源栏增加功勋点

- 改动

   活动竞技场统计跟随网站活动改动变化

   友谊任务页面结束后两天内保持可见

   恢复数据的合并方式

### v3.5.1

- 新增

   个人财产估值统计与每日变化

### v3.5.2

- 改动

   竞技场门票采集方式更新，无需持有门票，从市场读取

   竞技场门票价格采集失败的条目不再显示0，和上一个结果保持一致

### v3.5.3

- 改动

   竞技场门票刷新方式可以在设置中选择前台或后台：前台需要插件主页处于前台，耗时约50秒；后台无限制，耗时约170秒。

### v3.6

- 新增

   活动商店页，列举当前活动物品兑换不同项目的参考价值。

### v3.6.1

- 改动

   竞技场门票价格采集方式重写，利用setInterval循环调用+递归

   游戏经济刷新逻辑小改

   保存当前版面完善更多情况

### v3.6.2

- 改动

   插件弹出页的各按钮加了对应页面的高亮和错误页面的保护，只有在对应页面才能点击

   活动竞技场门票刷新方式更新，类似竞技场门票

   竞技场门票的估价考虑了活跃度和精英的活动点，均按照1:1转换为功勋

### v3.7

- 新增

   价格观测功能

- 改动

   自动刷新按钮会包含活动竞技场或友谊任务 

### v3.7.1

- 改动

   价格观测的一些细节

   每日财产变化的显示问题：1000K -> 1M ; 1 -> +1

   在个人资源中统计活动竞技场门票时统一不同活动的获取

### v3.7.2

- 改动

   活动竞技场页功能完善，修bug

   门票价值计算方式更新

### v3.7.3

- 新增

   用于比较的数字按色阶设置背景色

- 改动

   竞技场门票价值部分将收益和比率拆成两个表

   提取门票价格加一次检查，匹配成功才会录入

### v3.7.4

- 新增

   完美装备升级参照表

   一些文字说明

   竞技场门票价值部分增加净收益/时间表

   设置页增加盲扫和效率系数

- 改动

   装备加成删除钻石

   保存当前版面更新对出票格子的识别

   竞技场门票估价中活跃度:功勋从1:1改为1:2

   刷新按钮包含活动页面

### v3.7.5

- 新增

   查找低价装备功能，找售价低于碎片价的装备

   计算竞技场收益时的活跃转化度和活动物品价值可配置

- 改动

   保存版面的文件名加入时间

   非活动竞技场月个人资源的门票数量删除最后的空行

   参数设置只输部分参数时其他不被清空

### v3.7.6

- 新增

   从装备页面提取装备加成情况，门票价值计算使用完成的加成结果

   主界面添加GitHub链接

- 改动

   拆分各刷新模块，刷新数据按钮控制所有刷新，自动刷新功能将活动和非活动分开

   解决活动竞技场和竞技场门票刷新功能的冲突，修改setInterval主进程的名称

### v3.8

- 新增

   观测历史价格功能，可在下拉菜单中选择宝石/场币/竞技场门票种类/竞技场门票等级

   可以修改单个数据

### v3.8.1

- 改动

   活动竞技场历史价格添加色阶和修改单个数据功能

### v3.8.2

- 新增

   估计3BV功能

- 改动

   优化控制台输出，添加收到数据时间

### v3.8.3

- 新增

   估计3BV功能增加效率估算

### v3.9.0

- 新增

   好友页与添加好友功能

### v3.9.1

- 新增

   可以通过输入uid添加好友，支持排序和删除

### v3.9.2

- 改动

   版面布局兼容更多窗口尺寸

   当数据只有一个值时色阶的显示

   保存版面兼容不同皮肤（随机皮肤无法获取结果）

### v3.9.3

- 新增

   统计3BV分布功能

- 改动

   ~~站内个人主页改版，奖杯信息变为点击弹出~~

### v3.9.4

- 新增

   监控聊天功能

- 改动

   管理好友时清空文字

   好友页面排版

### v3.9.5

- 新增

   BVPB功能
   
- 改动

   各竞技场的用时系数可以单独配置

   竞技场门票和活动门票自动刷新逻辑优化

### v3.9.6

- 改动

   BVPB添加重新统计、备份等功能

   活动竞技场引用的装备加成更新

### v3.9.7

- 改动

   计算门票收益时的功勋点价值可配置

   好友页点击昵称和uid可直接复制

   监控聊天增加清空输入框和'me'

### v3.9.8

- 新增

   个人数据页可展开显示每日宝石、场币、金币、功勋变化

- 改动

   历史价格页默认不显示，选择后展开

   提取功勋时处理空格

   非竞技场月个人数据页不显示活动门票

   数字显示函数处理负数

   自动刷新数据的触发方式重写，将等待固定时间改为检测内容\
   
   监控聊天匹配规则完善

### v3.9.9

- 改动

   友谊任务每日数据只显示当月

   友谊任务的一些显示bug